<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="UTF-8">
        <title>Stay Viral Master Tracker</title>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
      <script src="https://cdn.tailwindcss.com"></script>
  </head>
<body>
      <div id="root"></div>div>
      <script type="text/babel">
            const {useState, useEffect, useMemo} = React;
            function App() {
                      const [auth, setAuth] = useState(false);
                      const [pw, setPw] = useState("");
                      const [err, setErr] = useState("");
                      const [range, setRange] = useState("all");
                      const [startDate, setStartDate] = useState("");
                      const [endDate, setEndDate] = useState("");
                      const [syncing, setSyncing] = useState(false);
                      const [lastSync, setLastSync] = useState(new Date().toLocaleTimeString());
                      const [metaSpend, setMetaSpend] = useState(0);
                      const [tiktokSpend, setTiktokSpend] = useState(0);
                      const [googleSpend, setGoogleSpend] = useState(0);
                      const [sales, setSales] = useState([
                        {id:1, date:"2026-01-28", offer:"Stay Viral Quickstart", revenue:9},
                        {id:2, date:"2026-01-28", offer:"Stay Viral Quickstart", revenue:9},
                        {id:3, date:"2026-01-28", offer:"Stay Viral Quickstart", revenue:9}
                                ]);
                      useEffect(() => { if(localStorage.getItem("kajabi_auth") === "true") setAuth(true); }, []);
                      const filteredSales = useMemo(() => {
                                    const now = new Date(); const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                                    return sales.filter(s => {
                                                      const saleDate = new Date(s.date);
                                                      const diffDays = Math.floor((today.getTime() - new Date(saleDate.getFullYear(), saleDate.getMonth(), saleDate.getDate()).getTime()) / (1000*60*60*24));
                                                      if(range === "custom" && startDate && endDate) return saleDate >= new Date(startDate) && saleDate <= new Date(endDate);
                                                      switch(range) { case "today": return diffDays === 0; case "yesterday": return diffDays === 1; case "7d": return diffDays >= 0 && diffDays <= 7; case "30d": return diffDays >= 0 && diffDays <= 30; case "12m": return diffDays >= 0 && diffDays <= 365; default: return true; }
                                    });
                      }, [sales, range, startDate, endDate]);
                      const totalRevenue = filteredSales.reduce((s, x) => s + x.revenue, 0);
                      const avgOrder = filteredSales.length > 0 ? (totalRevenue / filteredSales.length).toFixed(2) : "0.00";
                      const totalAdSpend = parseFloat(metaSpend || 0) + parseFloat(tiktokSpend || 0) + parseFloat(googleSpend || 0);
                      const commissionableSales = filteredSales.filter(s => s.revenue > 999);
                      const commissions = commissionableSales.reduce((sum, s) => sum + (s.revenue * 0.175), 0);
                      const profit = totalRevenue - totalAdSpend - commissions;
                      const handleSync = () => { setSyncing(true); setTimeout(() => { setSyncing(false); setLastSync(new Date().toLocaleTimeString()); }, 2000); };
                      if(!auth) return (<div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-6"><div className="bg-white/10 backdrop-blur-xl rounded-2xl p-8 w-full max-w-md shadow-2xl border border-white/10"><h1 className="text-2xl font-bold text-white mb-6 text-center">Stay Viral Master Tracker</h1><form onSubmit={e => { e.preventDefault(); if(pw === "stayviral2026") { localStorage.setItem("kajabi_auth", "true"); setAuth(true); } else { setErr("Wrong password"); } }}><input type="password" value={pw} onChange={e => setPw(e.target.value)} placeholder="Password" className="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white placeholder-white/50 mb-4"/>{err && <p className="text-red-400 mb-4 text-center">{err}</p>}<button className="w-full bg-purple-500 hover:bg-purple-600 text-white rounded-xl py-3 font-semibold">Login</button></form></div></div>);
                      const ranges = [{key:"today",label:"Today"},{key:"yesterday",label:"Yesterday"},{key:"7d",label:"7 Days"},{key:"30d",label:"30 Days"},{key:"12m",label:"12 Months"},{key:"all",label:"All Time"},{key:"custom",label:"Custom"}];
                      return (<div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6"><div className="max-w-6xl mx-auto">
                                    <div className="flex justify-between items-center mb-6 flex-wrap gap-4"><h1 className="text-3xl font-bold text-white">Stay Viral Master Tracker</h1><div className="flex items-center gap-3"><button onClick={handleSync} disabled={syncing} className="px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg text-sm font-medium">{syncing ? "Syncing..." : "Sync Now"}</button><span className="text-slate-400 text-xs">Last: {lastSync}</span><button onClick={() => {localStorage.removeItem("kajabi_auth"); setAuth(false);}} className="text-slate-400 hover:text-white text-sm">Logout</button></div></div>
                                    <div className="flex items-center gap-2 flex-wrap mb-6">{ranges.map(r => (<button key={r.key} onClick={() => setRange(r.key)} className={`px-3 py-1.5 rounded-lg text-sm font-medium ${range === r.key ? "bg-purple-500 text-white" : "bg-white/10 text-slate-300 hover:bg-white/20"}`}>{r.label}</button>))}{range === "custom" && (<div className="flex items-center gap-2 ml-2"><input type="date" value={startDate} onChange={e => setStartDate(e.target.value)} className="bg-white/10 border border-white/20 rounded-lg px-3 py-1.5 text-white text-sm"/><span className="text-slate-400">to</span><input type="date" value={endDate} onChange={e => setEndDate(e.target.value)} className="bg-white/10 border border-white/20 rounded-lg px-3 py-1.5 text-white text-sm"/></div>)}</div>
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><p className="text-slate-400 text-sm mb-1">Revenue</p><p className="text-3xl font-bold text-white">${totalRevenue.toLocaleString()}</p></div><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><p className="text-slate-400 text-sm mb-1">Sales</p><p className="text-3xl font-bold text-white">{filteredSales.length}</p></div><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><p className="text-slate-400 text-sm mb-1">Avg Order</p><p className="text-3xl font-bold text-white">${avgOrder}</p></div><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><p className="text-slate-400 text-sm mb-1">Profit</p><p className={`text-3xl font-bold ${profit >= 0 ? 'text-green-400' : 'text-red-400'}`}>${profit.toLocaleString()}</p></div></div>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><p className="text-slate-400 text-sm mb-2">Meta Ad Spend</p><div className="flex items-center"><span className="text-white text-xl mr-2">$</span><input type="number" value={metaSpend} onChange={e => setMetaSpend(e.target.value)} className="w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-xl"/></div></div><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><p className="text-slate-400 text-sm mb-2">TikTok Ad Spend</p><div className="flex items-center"><span className="text-white text-xl mr-2">$</span><input type="number" value={tiktokSpend} onChange={e => setTiktokSpend(e.target.value)} className="w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-xl"/></div></div><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><p className="text-slate-400 text-sm mb-2">Google Ad Spend</p><div className="flex items-center"><span className="text-white text-xl mr-2">$</span><input type="number" value={googleSpend} onChange={e => setGoogleSpend(e.target.value)} className="w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white text-xl"/></div></div></div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><p className="text-slate-400 text-sm mb-1">Agency Payout</p><p className="text-2xl font-bold text-yellow-400">Under Construction</p></div><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><p className="text-slate-400 text-sm mb-1">Agency Estimated Profit</p><p className="text-2xl font-bold text-yellow-400">Under Construction</p></div></div>
                                    <div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10 mb-6"><p className="text-slate-400 text-sm mb-1">Expenses Breakdown</p><div className="grid grid-cols-3 gap-4 mt-3"><div><p className="text-slate-500 text-xs">Total Ad Spend</p><p className="text-lg font-semibold text-orange-400">${totalAdSpend.toLocaleString()}</p></div><div><p className="text-slate-500 text-xs">Commissions (17.5%)</p><p className="text-lg font-semibold text-orange-400">${commissions.toFixed(2)}</p><p className="text-slate-600 text-xs">{commissionableSales.length} sales over $999</p></div><div><p className="text-slate-500 text-xs">Total Expenses</p><p className="text-lg font-semibold text-red-400">${(totalAdSpend + commissions).toFixed(2)}</p></div></div></div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><h2 className="text-lg font-semibold text-white mb-4">Revenue by Day</h2><p className="text-slate-400 text-center py-8">Charts coming soon</p></div><div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><h2 className="text-lg font-semibold text-white mb-4">Revenue by Offer</h2><p className="text-slate-400 text-center py-8">Charts coming soon</p></div></div>
                                    <div className="bg-white/10 backdrop-blur rounded-xl p-5 border border-white/10"><h2 className="text-lg font-semibold text-white mb-4">Sales ({filteredSales.length})</h2>{filteredSales.length === 0 ? (<p className="text-slate-400 text-center py-8">No sales found</p>) : (<div className="overflow-x-auto"><table className="w-full"><thead><tr className="border-b border-white/10"><th className="text-left py-3 text-slate-400 font-medium">Date</th><th className="text-left py-3 text-slate-400 font-medium">Offer</th><th className="text-right py-3 text-slate-400 font-medium">Revenue</th><th className="text-right py-3 text-slate-400 font-medium">Commission</th></tr></thead><tbody>{filteredSales.map(s => (<tr key={s.id} className="border-b border-white/5 hover:bg-white/5"><td className="py-3 text-white">{s.date}</td><td className="py-3 text-purple-300">{s.offer}</td><td className="py-3 text-right text-green-400 font-medium">${s.revenue}</td><td className="py-3 text-right text-orange-400 font-medium">{s.revenue > 999 ? `$${(s.revenue * 0.175).toFixed(2)}` : '-'}</td></tr>))}</tbody></table></div>)}</div>
                      </div></div>);
            }
            ReactDOM.render(<App/>, document.getElementById("root"));
      </script>
</body>
</html>html>
</body></title>
  </head>
